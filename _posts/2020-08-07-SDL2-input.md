---
title: SDL2 text input
date:  2020-08-07 12:00:00 +0900
last_modified_at: 2020-08-07 12:00:00 +0900
categories:
  - SDL2
  - text input
---

SDL2는 많이 쓰는 툴킷으로 알고 있는데 인터넷 검색을 해봐도 관련 글이 보이지 않는다.
테스트해보기 위해 인터넷 검색을 해봐도 창 띄우는 예제 정도는 있는데 입력에 관한
예제는 잘 보이지 않았다. 가끔 있어도 파편으로만 보여줘서 SDL2 문외한 입장에서
실행해볼 엄두가 나지 않았다.

## TESTIME

SDL2 동네는그리 친절한 동네는 아닌것 같다고 잠깐 실망했지만 소스를 받고 `test`
디렉토리에서 `testime.c`라는 소스를 발견했다. 빌드하려고 보니 `aclocal.in`
이런 것들이 보여 머리에서 쥐가날 것 같았지만 꾹 참고 겨우 컴파일해서
돌려보니 화면이 뜬다.

- configure 결과

굳이 ibus나 fcitx를 왜 찾는지는 모르겠지만 일단 희망적이다.

```
Enabled modules : atomic audio video render events joystick haptic sensor power filesystem threads timers file loadso cpuinfo assembly
Assembly Math   : mmx 3dnow sse sse2 sse3
Audio drivers   : disk dummy oss alsa(dynamic) pulse(dynamic) sndio
Video drivers   : dummy x11(dynamic) opengl opengl_es1 opengl_es2 vulkan
X11 libraries   : xcursor xdbe xinerama xinput2 xinput2_multitouch xrandr xscrnsaver xshape xvidmode
Input drivers   : linuxev linuxkd
Using libsamplerate : NO
Using libudev       : YES
Using dbus          : YES
Using ime           : YES
Using ibus          : YES
Using fcitx         : NO
```

- testime screenshot

![testime](/screenshot/20200807_sdl_testime.png)

키보드 입력을 해보니 전혀 예상하지 못한 결과들이 나온다.
`k`를 쳤을때 `ㄱ`이 나오는 것은 맞는데 `h`는 `ㄴ`이 나오지 않고
뜬금없이 `\`이 나오는걸까?

Gnome 앱들은 gtkimmodule인가 자체 모듈을 쓸테니 참고가 되지는 않을 것 같고...

```
INFO: unifont: Loaded 57086 glyphs.
INFO: Using font: unifont-9.0.02.hex
INFO: text editing "", selected range (0, 0)
INFO: text editing "", selected range (0, 0)
INFO: Keyboard: scancode 0x00000004 = A, keycode 0x00000061 = A
INFO: Keyboard: text input "a"
INFO: text inputed: a
INFO: Keyboard: scancode 0x000000E1 = Left Shift, keycode 0x400000E1 = Left Shift
INFO: text editing "", selected range (0, 0)
INFO: text editing "ㄱ", selected range (0, 1)
INFO: text editing "", selected range (0, 0)
INFO: Keyboard: text input "ㄱ`"
INFO: text inputed: aㄱ`
INFO: text editing "", selected range (0, 0)
INFO: text editing "", selected range (0, 0)
INFO: Keyboard: text input "\"
INFO: text inputed: aㄱ`\
INFO: text editing "", selected range (0, 0)
INFO: text editing "", selected range (0, 0)
INFO: Keyboard: text input "\"
INFO: text inputed: aㄱ`\\
INFO: text editing "", selected range (0, 0)
INFO: text editing "", selected range (0, 0)
```

TBC

