---
title: Tauri GUI
date:  2022-10-06 12:00:00 +0900
categories:
  - tauri
---

## MessageBox with `tauri::api::dialog::massage`

javascript로 native 다이알로그를 띄울수 있다.

- https://medium.com/@marm.nakamura/trying-to-the-tauri-gui-on-rust-5-messagebox-and-openfiledialog-bff2c41cfae5

## tauri.conf.json 수정
```json
“allowlist”: {
  “all”: true,
  “dialog”: {
    “all”: true,
    “open”: true,
    “save”: true
  }
},
```

## javascript로 dialog 열기

```js
import { ask, message, open } from '@tauri-apps/api/dialog';
const confirmed = confirm('Are you sure?', 'Tauri');
message('Tauri is awesome', 'Tauri');
const selected = open({
  multiple: true,
  filters: [{
    name: 'Image',
    extensions: ['png', 'jpeg']
  }]
});
```

![tauri-dialog](/screenshot/20221006_tauri_dialog.png)

### rust 다음과 같이 dialog 여는 command를 만들고 js 에서 호출

```rust
use tauri::api::dialog::*; // Add tihs
use tauri::Manager; // and this
#[tauri::command]
fn call_rust(js_msg: String, window: tauri::Window) -> String {
  println!("from JS:{}", js_msg);
  let label = window.label();
  let parent_window = window.get_window(label).unwrap();
  tauri::async_runtime::spawn(async move {
    message(Some(&parent_window), "Title", &js_msg);
  });
  "くRust!".into()
}
```
```js
  invoke('call_rust', {jsMsg: 'hello'}).then((message) => {
    console.log(message);
  })
  .catch((error) => {
    console.error(error);
  });
```

- 이렇게 열린 창은 화면 중앙에 나타난다.


## 참고
- https://medium.com/@marm.nakamura/trying-to-the-tauri-gui-on-rust-4-state-management-on-the-rust-side-8899bda08936
